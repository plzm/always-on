{
	"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"roleAssignmentName": {
			"type": "String",
			"defaultValue": "[newGuid()]",
			"metadata": {
				"displayName": "Role Assignment Name",
				"description": "Must be a GUID"
			}
		},
		"roleDefinitionId": {
			"type": "String",
			"defaultValue": "",
			"metadata": {
				"displayName": "Role Definition ID",
				"description": "See https://docs.microsoft.com/azure/role-based-access-control/built-in-roles"
			}
		},
		"principalId": {
			"type": "String",
			"defaultValue": ""
		},
		"scopeId": {
			"type": "String",
			"defaultValue": "[resourceGroup().id]",
			"metadata": {
				"displayName": "Scope ID for the Role Assignment",
				"description": "Defaults to the deployment Resource Group"
			}
		}
	},
	"variables": {
		"roleDefinitionId": "[resourceId('Microsoft.Authorization/roleDefinitions', parameters('roleDefinitionId'))]",
		"apiVersionAuthRoleAssignment": "2021-04-01-preview"
	},
	"resources": [
		{
			"type": "Microsoft.Authorization/roleAssignments",
			"name": "[parameters('roleAssignmentName')]",
			"apiVersion": "[variables('apiVersionAuthRoleAssignment')]",
			"scope": "[parameters('scopeId')]",
			"properties": {
				"roleDefinitionId": "[variables('roleDefinitionId')]",
				"principalId": "[parameters('principalId')]"
			}
		}
	]
}